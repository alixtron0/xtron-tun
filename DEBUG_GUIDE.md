# ๐ ุฑุงูููุง ุฏุจุงฺฏ ู ุชุณุช XTRON-TUN

## ูุดฺฉู ูุจู
ุงุณฺฉุฑูพุช ูุตุจ ุฏุฑ ูุฑุญูู "Installing system packages" ูุชููู ูโุดุฏ ู ุจุณุชู ูโุดุฏ.

## ุชุบุฑุงุช ุงุนูุงู ุดุฏู

### 1๏ธโฃ ุบุฑูุนุงู ฺฉุฑุฏู `set -e` ูููุช
```bash
# ูุจู: set -euo pipefail
# ุจุนุฏ: set -uo pipefail (ุจุฏูู -e)
```
ุงู ุจุงุนุซ ูโุดูุฏ ุงุณฺฉุฑูพุช ุฏุฑ ุงููู ุฎุทุง ูุชููู ูุดูุฏ.

### 2๏ธโฃ ุงุถุงูู ฺฉุฑุฏู Error Trap
```bash
trap 'echo "Error on line $LINENO. Exit code: $?"' ERR
```
ุญุงูุง ุงฺฏุฑ ุฎุทุง ุฑุฎ ุฏูุฏุ ุดูุงุฑู ุฎุท ู exit code ููุงุด ุฏุงุฏู ูโุดูุฏ.

### 3๏ธโฃ ุญุงูุช DEBUG
```bash
DEBUG=1 bash install.sh
```
ุจุง ุงู ุฏุณุชูุฑ ูโุชูุงูุฏ ุงุทูุงุนุงุช ุฏุจุงฺฏ ฺฉุงูู ุจุจูุฏ.

### 4๏ธโฃ ูุงฺฏโฺฏุฑ ฺฉุงูู
ููู ุนููุงุช background ุจู `/tmp/xtron-install.log` ูุงฺฏ ูโุดููุฏ.

### 5๏ธโฃ ุชุงุจุน Spinner ุจูุจูุฏ ุงูุชู
- ุงุณุชูุงุฏู ุงุฒ `ps -p` ุจุฌุง `kill -0`
- ุงุถุงูู ฺฉุฑุฏู delay ุจุฑุง ุฌููฺฏุฑ ุงุฒ race condition
- ููุดู success ููุงุด ูโุฏูุฏ (ุญุช ุฏุฑ ุตูุฑุช ุฎุทุง)

### 6๏ธโฃ Subshell ูุง ุจุง `set +e`
ููู ุฏุณุชูุฑุงุช background ุฏุฑ subshell ุจุง `set +e` ุงุฌุฑุง ูโุดููุฏ ุชุง ุฎุทุงูุง propagate ูุดููุฏ.

## ูุญูู ุชุณุช

### ุชุณุช 1: ุงุฌุฑุง ูุนููู
```bash
sudo bash install.sh
```

### ุชุณุช 2: ุจุง ุญุงูุช DEBUG
```bash
sudo DEBUG=1 bash install.sh
```

### ุชุณุช 3: ุจุง ุงุณฺฉุฑูพุช ุชุณุช
```bash
sudo bash test-install.sh
```

### ุชุณุช 4: ุจุฑุฑุณ ูุงฺฏโูุง
```bash
# ุฏุฑ ุญู ูุตุจ (ุฏุฑ ุชุฑููุงู ุฏฺฏุฑ)
tail -f /tmp/xtron-install.log

# ุจุนุฏ ุงุฒ ูุตุจ
cat /tmp/xtron-install.log
cat /tmp/xtron-install-output.log
```

## ุจุฑุฑุณ ูุดฺฉูุงุช ุงุญุชูุงู

### ุงฺฏุฑ ูููุฒ ูุชููู ูโุดูุฏ:

1. **ุจุฑุฑุณ apt lock:**
```bash
sudo lsof /var/lib/dpkg/lock-frontend
sudo lsof /var/lib/apt/lists/lock
```

2. **ูพุงฺฉ ฺฉุฑุฏู lock files (ุงฺฏุฑ ูุงุฒ ุจูุฏ):**
```bash
sudo rm /var/lib/apt/lists/lock
sudo rm /var/lib/dpkg/lock-frontend
sudo dpkg --configure -a
```

3. **ุงุฌุฑุง ุฏุณุช apt-get:**
```bash
sudo apt-get update
sudo apt-get install -y curl wget git net-tools netcat jq bc build-essential libssl-dev
```

4. **ุจุฑุฑุณ ูุถุง ุฏุณฺฉ:**
```bash
df -h
```

5. **ุจุฑุฑุณ ุญุงูุธู:**
```bash
free -m
```

## ูุงฺฏโูุง ููู

### ูุงฺฏ ูุตุจ:
```bash
/tmp/xtron-install.log           # ูุงฺฏ ุนููุงุช background
/tmp/xtron-install-output.log     # ูุงฺฏ ฺฉุงูู ุงุณฺฉุฑูพุช (ุจุง test-install.sh)
```

### ูุงฺฏ ุณุณุชู:
```bash
sudo journalctl -xe              # ูุงฺฏ ุณุณุชู
sudo dmesg | tail                # ูุงฺฏ kernel
```

## ุงุทูุงุนุงุช ุณุณุชู ุจุฑุง ุฏุจุงฺฏ

```bash
# ูุณุฎู OS
cat /etc/os-release

# ูุถุง ุฏุณฺฉ
df -h

# ุญุงูุธู
free -m

# ูุณุฎู bash
bash --version

# ุจุฑุฑุณ ุงุจุฒุงุฑูุง ููุฌูุฏ
which apt-get curl wget git

# ุจุฑุฑุณ ุดุจฺฉู
ping -c 3 8.8.8.8
curl -I https://github.com
```

## ุฏุฑ ุตูุฑุช ูุงุฒ ุจู ูพุดุชุจุงู

ูุทูุงู ุงุทูุงุนุงุช ุฒุฑ ุฑุง ุงุฑุณุงู ฺฉูุฏ:

1. ุฎุฑูุฌ `cat /etc/os-release`
2. ุฎุฑูุฌ `DEBUG=1 sudo bash install.sh` (ฺฉุงูู)
3. ูุญุชูุง `/tmp/xtron-install.log`
4. ุฎุฑูุฌ `df -h` ู `free -m`

## ุชุบุฑุงุช ุฏุฑ README.md

โ ููู ุฏุณุชูุฑุงุช ูุตุจ ุจุง `sudo` ุจุฑูุฒุฑุณุงู ุดุฏูุฏ
โ ุจุฎุด "ูฺฉุชู ููู: ุฏุณุชุฑุณ Root ุงูุฒุงู ุงุณุช" ุงุถุงูู ุดุฏ
โ ููู ุฏุณุชูุฑุงุช systemd ุจุง `sudo` ููุดุชู ุดุฏูุฏ
โ ุจุฎุด ุนุจโุงุจ ุจุง `sudo` ุจุฑูุฒุฑุณุงู ุดุฏ

## ูุชุฌูโฺฏุฑ

ุจุง ุงู ุชุบุฑุงุชุ ุงุณฺฉุฑูพุช ุจุงุฏ:
- โ ุจุฏูู hang ฺฉุงุฑ ฺฉูุฏ
- โ ุฏุฑ ุตูุฑุช ุจุฑูุฒ ุฎุทุงุ ุงุทูุงุนุงุช ฺฉุงูู ููุงุด ุฏูุฏ
- โ ููู ุนููุงุช ุฑุง ูุงฺฏ ฺฉูุฏ
- โ ุญุช ุฏุฑ ุตูุฑุช ุฎุทุงูุง ุฌุฒุฆุ ูุตุจ ุฑุง ุงุฏุงูู ุฏูุฏ
- โ ููุท ุจุง root ูุงุจู ุงุฌุฑุง ุจุงุดุฏ

---

**ูฺฉุชู ูพุงุงู:** ุงฺฏุฑ ูุดฺฉู ููฺูุงู ุงุฏุงูู ุฏุงุฑุฏุ ูุทูุงู ุจุง DEBUG=1 ุงุฌุฑุง ฺฉูุฏ ู ุฎุฑูุฌ ฺฉุงูู ุฑุง ุจุฑุฑุณ ฺฉูุฏ.
